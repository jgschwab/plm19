#!/usr/bin/env python
import requests
import subprocess
import time


# Start server program
server_thread = subprocess.Popen(["python", "dom_server.py"],
                                 stdout=subprocess.DEVNULL,
                                 stderr=subprocess.DEVNULL)

# Wait for server to start
time.sleep(1)


sample_request_data = {
        "weights": [1, 0, -1, 1],
        "rows": [
            [2, 3, 4, 5],
            [4, 6, 2, 6],
            [5, 6, 2, 6],
            [4, 6, 7, 2]]
        }

dom_scores = requests.post("http://localhost:5000/domScoredData",
                           json=sample_request_data)
print(dom_scores.json())

server_thread.terminate()
